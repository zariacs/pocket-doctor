generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

model Patient {
  id          String  @id
  fname       String
  lname       String
  email       String  @unique // prevents multiple patients with the same email address, redundant due to Clerk
  allergies   String? // these optional fields are empty at user registration
  medications String?
  address     String?

  @@map(name: "patients")
}

model Appointment {
  id        Int      @id @default(autoincrement())
  patientId String   @map(name: "patiend_id")
  doctorId  Int      @default(1) @map(name: "doctor_id")
  date      DateTime @db.Date
  time      DateTime @db.Time()
  createdAt DateTime @default(now()) @map(name: "created_at")
  approved  Boolean  @default(true)
  updatedAt DateTime @updatedAt @map(name: "approved_at")
  // updatedAt is intended to show when a doctor declines/approves/otherwise updates an appointment 
  // Patients are currently unable to update an appointment

  @@map(name: "appointments")
}

model Doctor {
  id    Int    @id @default(autoincrement())
  fname String @db.VarChar(256)
  lname String @db.VarChar(256)

  @@map(name: "doctors")
}
